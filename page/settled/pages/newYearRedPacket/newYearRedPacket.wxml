<t_f title='{{c_title}}' arrow='{{c_arrow}}' backcolor='{{c_backcolor}}'></t_f>
<view style='width:100%;height:{{statusBarHeightMc}}px;'></view>

<view class="wrap">
  <image class="newyrBanner" src="https://cdn.51chaidan.com/images/icon/newYearActivityIcon.jpg" mode="widthFix"></image>
  
  <!-- <view class="title">美拆新年送好礼</view> -->
  <view class="progressWrap" wx:if='{{listData}}'>
    <view class="progressEmpiricalValue">
      <text>{{listData.speed.userExper}}/</text>{{listData.speed.upExper}}经验值
      <!-- <view class="activityRulesBox" style="margin-left:30rpx;">分享好友<button open-type="share" class='shareButton'></button></view>
      <view class="activityRulesBox" catchtap="NewYearSctivitiesTipFun">活动规则</view> -->
      <view class="fixedWrap">
        <view class="activityRulesImgBox"><image src="https://cdn.51chaidan.com/images/brandInfoIcon/wxOpen.png" mode="widthFix"></image><button open-type="share" class='shareButton'></button></view>
        <view class="activityRulesBox" catchtap="NewYearSctivitiesTipFun">活动规则</view>
      </view>
    </view>
    <view class="progressEmpiricalBox">
      <view class="awardThumb">
        <image src="{{listData.speed.list[0].img}}" mode="aspectFit"></image>
        <text>Lv {{listData.speed.list[0].grade}}</text>
      </view>
      <view class="sonPogress"> 
         <view class="sonPogressBox">
            <block wx:if='{{listData.speed.grade < 4}}'>
                <text style="width:{{speedOfProgress}}%;"></text>
            </block>
            <block wx:else>
                <text style="width:100%;"></text>
            </block>         
         </view>

        
      </view>
      <view class="awardThumb">
        <image src="{{listData.speed.list[1].img}}" mode="aspectFit"></image>
        <text>Lv {{listData.speed.list[1].grade}}</text>
      </view>
      <block wx:if='{{listData.speed.grade < 3}}'>
          <view class="sonPogress" style="background: linear-gradient(to right,#fde6ba,#F5F5F5);"></view>
      </block>
      <block wx:else>
          <view class="sonPogress">
              <view class="sonPogressBox">
                  <block wx:if='{{listData.speed.grade >= 4}}'><text style="width:{{speedOfProgress}}%;"></text></block>
              </view>
          </view>
      </block>

      <view class="awardThumb">
        <image src="{{listData.speed.list[2].img}}" mode="aspectFit"></image>
        <text>Lv {{listData.speed.list[2].grade}}</text>
      </view>
    </view>
  </view>
  
  <view class="awardWrap" wx:if='{{listData}}'> 
    <text class="awardTitle">好礼简介，点击查看详情</text>
    <view class="awardItems">
        <block wx:for='{{listData.award}}' wx:key='key' wx:if="{{listData.award.length != (index+1)}}">
            <view class="item" catchtap="displayDetailTip" data-ind='{{index}}'>
                <image src="{{item.img}}" mode="aspectFit"></image>
                <view style="padding:10rpx 16rpx 16rpx;">
                  <text>{{item.grade_text}}好礼</text>{{item.title}}
                </view>
            </view>
        </block>
    </view>
    <view class="fiveAwardItem">
        <view class="item" catchtap="displayDetailTip" data-ind='{{(listData.award.length-1)}}'>
          <image src="{{listData.award[listData.award.length-1].img}}" mode="aspectFit"></image>
          <view style="padding:10rpx 16rpx 16rpx;">
            <text>{{listData.award[listData.award.length-1].grade_text}} </text>{{listData.award[listData.award.length-1].title}}
          </view>
        </view>
    </view>
  </view>
  
  <block wx:if='{{infoData.is_display_active && infoData.rece_status != 2}}'>
      <view class="taskWrap" id='task' wx:if='{{listData}}'> 
        <view class="taskTitle">做任务，解锁/升级当前礼品</view>
        <view class="taskItems">
            <block wx:for='{{listData.active}}' wx:key='key'>
                <view class="taskItem">
                    <view class="taskItemTxt">
                      <text>{{item.title}}</text>
                      <text>{{item.description}}</text>
                    </view>
                    <block wx:if='{{item.is_rece == 0}}'>

                        <block wx:if='{{item.type == 98}}'>
                            <view class="taskBtn invitation" catchtap="receiveTask" data-type='{{item.type}}' data-itemtype='{{item.jump}}'>签到</view>
                        </block>
                        <block wx:elif='{{item.type == 99}}'>
                            <view class="taskBtn invitation">
                                <button open-type="share" class='shareButton'></button>去邀请
                            </view>
                        </block>
                        <block wx:elif='{{item.type == 14 || item.type == 21}}'>
                            <view class="taskBtn invitation" catchtap="jumptaskDeail" data-type='{{item.type}}' data-itemtype='{{item.jump}}'>去购买</view>
                        </block>
                    </block>
                    <block wx:elif='{{item.is_rece == 1}}'>
                        <view class="taskBtn blueBtn" catchtap="receiveTask" data-type='{{item.type}}'>领取</view>
                    </block>
                    <block wx:elif='{{item.is_rece == 2}}'>
                        <view class="taskBtn done">已完成</view>
                    </block>
                </view>
            </block>
        </view>
      </view>
  </block>
  <view class="footerWrapFix" wx:if='{{bottomButton}}'> 
    <view class="footerWrapFixTxt">该活动只能领取一次礼品，做任务可以升级礼包哦</view>
    <view class="footerWrap">
        <block wx:if='{{newdataexh < infoData.start_time_active}}'>
            <view class="blueBtn" catchtap="StartReminder" style="background: #E68327 !important;">活动开始提醒</view>
        </block>
        <block wx:else>
            <view class="{{infoData.rece_status==1?'blueBtn':''}}" wx:if="{{infoData}}">
                <block wx:if='{{infoData.rece_status == 0 || infoData.rece_status == 1}}'>
                    <block wx:if='{{listData.speed.grade == 0}}'>领取Lv1礼品</block>
                    <block wx:else>领取Lv{{listData.speed.grade}}礼品</block>
                </block>
                <block wx:else>已领取</block>
                <view wx:if='{{infoData.rece_status==1 && listData.speed.grade == 5}}' class="footerWrapPosition">
                  <!-- catchtap="fiveLevelBulletFrameData" -->
                    <button class='shareButton' type='primary' bindtap="fiveLevelBulletFrameButton"></button>
                </view>
                <view wx:elif='{{infoData.rece_status==1 && listData.speed.grade != 5}}' class="footerWrapPosition">
                  <!-- catchtap="SCBoxTipFun" -->
                  <button class='shareButton' type='primary' bindtap="SCBoxTipFunButton"></button>
                </view>
            </view>
            <view class="blueBtn" catchtap="jumpTask" wx:if='{{infoData.is_display_active && infoData.rece_status != 2}}'>新年任务</view>
        </block> 


    </view>


  </view>


  <view class="detailsMask" catchtouchmove="true" wx:if="{{fiveLevelBulletFrame}}" catchtap="fiveLevelBulletFrameFun">
    <view class="detailsMaskBox" catchtap="true" style="height:1200rpx;">
      <view class="detailsMaskBoxTitle">5级新春好礼<image src='../../../../pages/images/forknumber.png' class='recgadheadimg' bindtap='fiveLevelBulletFrameFun'></image></view>
      <view class="detailsTitleBox">下列商品任选一件</view>
      <scroll-view scroll-y="true" class="NyRscrollView">
          <view class="NyRscrollViewEve" wx:for="{{fiveList}}" wx:key='key'>
              <image src="{{item.role_img}}" class="NyRscrollViewEveImg" mode="aspectFit"></image>
              <view class="NyRscrollViewEveRgiht">
                  <view class="disanum_sb_txtone multilineellipsis">{{item.role_name ||item.goods_name}}</view>
                  <view class="disanum_sb_txtoneStyle" wx:if='{{item.role_name}}'>款式：{{item.role_name}}</view>
                  <view class="receiveFive {{item.stock > 0?'blueBtn':''}}" catchtap="{{item.stock > 0?'receivePrizes':''}}" data-ind='{{index}}'>领取</view>
              </view>
          </view>


      </scroll-view>
    </view>
  </view>

  <view class="detailsMask" catchtouchmove="true" wx:if="{{isDetailsMask}}" catchtap="isDetailsMaskFun">
    <view class="detailsMaskBox" catchtap="true"  style="height:850rpx;">
      <view class="detailsMaskBoxTitle">{{awardDetail.grade_text}} 礼品详情<image src='../../../../pages/images/forknumber.png' class='recgadheadimg' bindtap='isDetailsMaskFun'></image></view>
      <text class="detailsTitle">以下商品<block wx:if='{{awardDetail.grade_text=="Lv5"}}'>任选</block><block wx:else>随机</block>一款</text>
      <scroll-view scroll-y="true" style="width:100%;height:740rpx;">
          <view class="detailsItems">
              <block wx:for="{{awardDetail.list}}" wx:key='key'>
                  <view class="detailsItem">
                      <image src="{{item.role_img}}" mode="aspectFit"></image>
                      <text>{{item.role_name || item.goods_name}}</text>
                  </view>
              </block>
          </view>
      </scroll-view>

    </view>
  </view>

  <!--  收货地址  -->
  <view class='tipback' wx:if='{{tipback}}' catchtouchmove="preventD"></view>
  <view class='receivingaddress' wx:if='{{receivingaddress}}'>
    <view class='recgadhead'>
      收货地址
      <image src='../../../../pages/images/forknumber.png' class='recgadheadimg' bindtap='receivingaddressfun'></image>
    </view>
    <view class='recgadcon'>
      <view class='recgaddata' wx:for='{{addressdata}}' wx:key='key'>
        <view class='recgaddname' data-tipaid='{{item.aid}}' data-tipadd='{{item.address}}' data-ind='{{index}}' catchtap='revisethereceivingaddress'>
          <view class='recgaddnameleft'>{{item.consignee}}</view>
          <view class='recgaddnameleft'>{{item.phone}}</view>
          <view class="selectAddressBut">选择该地址</view>
        </view>
        <view class='recgadaddress' data-tipaid='{{item.aid}}' data-tipadd='{{item.address}}' data-ind='{{index}}' catchtap='revisethereceivingaddress'>{{item.province}}{{item.city}}{{item.district}}{{item.address}}</view>
        <view class='recgadbottom'>
          <view class='recgadbotleft'>
            <image class='recgadbotleftimg' hidden='{{!item.checked}}' src='../../../../pages/images/pressed_click.png'></image>
            <image class='recgadbotleftimg' hidden='{{item.checked}}' src='../../../../pages/images/normal_click.png'></image>
            默认地址
          </view>
          <view class='recgadbotright' bindtap='deladdress' data-ind="{{item.aid}}">
            <image src='../../../../pages/images/icon_delete.png' class='recgadbotleftimg'></image>
            删除
          </view>
          <view class='recgadbotright' style='margin-right:50rpx;' bindtap='jumpeditaddress' data-address='{{item.address}}' data-aid='{{item.aid}}' data-city='{{item.city}}' data-consignee='{{item.consignee}}' data-district='{{item.district}}' data-phone='{{item.phone}}'
            data-province='{{item.province}}' data-idcard='{{item.idcard}}'>
            <image src='../../../../pages/images/icon_edit.png' class='recgadbotleftimg'></image>
            编辑
          </view>
        </view>
      </view>
      <view class='noDataCom' wx:if='{{addressdata.length==0}}'>
          <image src='https://cdn.51chaidan.com/images/brandInfoIcon/no-data.png' class='noDataImg'></image>
      </view>
    </view>
    <view class='recgadbot' bindtap='jumpaddress'>
      增加新地址
    </view>
  </view>
</view>



<view class="wshNew" catchtouchmove="true" wx:if='{{NewYearSctivitiesTip}}' catchtap="NewYearSctivitiesTipFun">
     <view class="nyarulebox" catchtap="true">
          <view class="nyaruleboxHead">活动规则</view>
          <scroll-view scroll-y="true" class="nyaruleboxSv">
              <text>{{infoData.tips}}</text>
          </scroll-view>
          <view class="nyaruleboxBottom" catchtap="NewYearSctivitiesTipFun">确定</view>
     </view>
</view>

<view class="wshNew" catchtouchmove="true" wx:if='{{SCBoxTip}}' catchtap="SCBoxTipFun">
     <view class="SCBox" catchtap="true">
          <view class="SCBoxTxt">该活动只可领取一次礼品哦，领取礼包后活动自动结束是否现在领取？</view>
          <view class="SCBoxBottom">
              <view catchtap="receivePrizes" data-ind='0'>现在领取</view>
              <view class="blueBtn" catchtap="SCBoxTipFun">继续升级礼包</view>
          </view>
     </view>
</view>